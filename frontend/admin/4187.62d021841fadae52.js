"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[4187],{64187:(j,h,s)=>{s.r(h),s.d(h,{AccessPermissionModule:()=>R});var l=s(60177),a=s(51188),d=s(79176),t=s(54438),u=s(88322),g=s(41780);const f=()=>["/settings/access-and-permission/role/list"],b=()=>["/settings/access-and-permission/user/list"];let x=(()=>{class e{constructor(){}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-access-layout"]],decls:22,vars:18,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"page-title"],[1,"text14"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"nav-tabs","nav"],[1,"nav-item"],["routerLinkActive","active","ariaCurrentWhenActive","edit-role-permission",1,"nav-link",3,"appHideIfUnauthorized","routerLink"],["routerLinkActive","active",1,"nav-link",3,"appHideIfUnauthorized","routerLink"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p",4),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8)(13,"span"),t.EFF(14),t.nI1(15,"translate"),t.k0s()()(),t.j41(16,"li",7)(17,"a",9)(18,"span"),t.EFF(19),t.nI1(20,"translate"),t.k0s()()()()()()(),t.nrm(21,"router-outlet")),2&o&&(t.R7$(4),t.JRh(t.bMT(5,8,"Settings.nav.Accessandpermission")),t.R7$(3),t.JRh(t.bMT(8,10,"Settings.nav.SettingOrder")),t.R7$(5),t.Y8G("appHideIfUnauthorized","settings-role")("routerLink",t.lJ4(16,f)),t.R7$(2),t.SpI(" ",t.bMT(15,12,"common.Roles")," "),t.R7$(3),t.Y8G("appHideIfUnauthorized","settings-user")("routerLink",t.lJ4(17,b)),t.R7$(2),t.SpI(" ",t.bMT(20,14,"Settings.nav.Users")," "))},dependencies:[a.n3,a.Wk,a.wQ,u.H,g.D9],styles:[".setup-wrapper[_ngcontent-%COMP%]{padding:16px;margin-bottom:0!important}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}.back-buttons[_ngcontent-%COMP%]{background:#f20a6d!important;border:solid thin #dddddd!important;color:#fff!important;padding:4px 16px!important;float:right!important;margin-top:-45px;margin-right:10px}.active[_ngcontent-%COMP%]{background-color:transparent;border-bottom:solid green}"]})}}return e})();var M=s(84507),P=s(345),m=s(89417);function C(e,p){if(1&e&&(t.j41(0,"span",9),t.EFF(1),t.nI1(2,"translate"),t.j41(3,"b"),t.EFF(4),t.nI1(5,"uppercase"),t.k0s()()),2&e){const n=t.XpG();t.R7$(),t.SpI("",t.bMT(2,2,"common.USER")," - "),t.R7$(3),t.JRh(t.bMT(5,4,null==n.detail?null:n.detail.name))}}function O(e,p){if(1&e){const n=t.RV6();t.j41(0,"div",2)(1,"input",18),t.mxI("ngModelChange",function(i){const r=t.eBV(n).$implicit;return t.DH7(r.selected,i)||(r.selected=i),t.Njj(i)}),t.bIt("change",function(){t.eBV(n);const i=t.XpG(3);return t.Njj(i.statusChange())}),t.k0s(),t.j41(2,"label",19),t.EFF(3),t.k0s()()}if(2&e){const n=p.$implicit;t.R7$(),t.FS9("id",n.moduleId),t.Y8G("value",n.moduleId),t.R50("ngModel",n.selected),t.Y8G("checked",n.selected),t.R7$(),t.FS9("for",n.moduleId),t.R7$(),t.SpI(" ",null==n?null:n.name," ")}}function v(e,p){if(1&e&&(t.j41(0,"div",15)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"div",16),t.DNE(4,O,4,6,"div",17),t.k0s()()),2&e){const n=p.$implicit;t.R7$(2),t.JRh(null==n?null:n.name),t.R7$(2),t.Y8G("ngForOf",null==n?null:n.permissionModule)}}function _(e,p){if(1&e){const n=t.RV6();t.j41(0,"div",10),t.DNE(1,v,5,2,"div",11),t.nI1(2,"async"),t.j41(3,"div",12)(4,"button",13),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.cancel())}),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"button",14),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.save())}),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",t.bMT(2,3,n.sandbox.getPermissionsList$)),t.R7$(4),t.SpI(" ",t.bMT(6,5,"Settings.nav.Cancel")," "),t.R7$(3),t.SpI("",t.bMT(9,7,"Settings.nav.Save")," ")}}const w=[{path:"",redirectTo:"role",pathMatch:"full"},{path:"",component:x,children:[{path:"",redirectTo:"role",pathMatch:"full"},{path:"role",loadChildren:()=>Promise.all([s.e(6250),s.e(4123),s.e(3464)]).then(s.bind(s,3464)).then(e=>e.RoleModule),canActivate:[d.q],data:{permission:"settings-role",root:"settings"}},{path:"user",loadChildren:()=>Promise.all([s.e(6250),s.e(4123),s.e(1214)]).then(s.bind(s,91214)).then(e=>e.UserModule),canActivate:[d.q],data:{permission:"settings-user",root:"settings"}},{path:"permission",component:(()=>{class e{constructor(n,o,i,r,c){this.route=n,this.sandbox=o,this.changeDetect=i,this.router=r,this.titleService=c,this.subscriptions=[],this.selectAllPermission=!1,this.titleService.setTitle("Settings | Access and permission")}ngOnInit(){this.intializer(),this.getPermissionList(),this.subscribeList()}getPermissionList(){this.sandbox.getPermissionlist({})}getPermission(){const n={};n.refType="user"===this.type?2:1,n.refId=this.id,this.sandbox.getPermission(n),this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(o=>{o&&this.getStatus()}))}save(){const n=[];this.permissionList.forEach(i=>{i.permissionModule&&i.permissionModule.forEach(r=>{!0===r.selected&&n.push(r.slugName)})});const o={};o.refId=this.id,o.refType="user"===this.type?2:1,o.permission=JSON.stringify(n),this.sandbox.addPermission(o),this.sandbox.permissionAddLoaded$.subscribe(i=>{!0===i&&this.router.navigate(2==o.refType?["/settings/access-and-permission/user/list"]:["/settings/access-and-permission/role/list"])})}selectAll(n){this.sandbox.selectAllPermission(n)}cancel(){this.router.navigate(["/settings/access-and-permission"])}statusChange(){this.getStatus()}subscribeList(){this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(n=>{n&&(this.permissionList=n,this.id&&this.getPermission())}))}getStatus(){let n=!0;this.permissionList.forEach(o=>{n&&(n=o.permissionModule.every(i=>!0===i.selected))}),this.selectAllPermission=n}intializer(){this.detail=JSON.parse(this.route.snapshot.queryParams.user),this.type=this.detail.type,this.id=this.detail.id}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(a.nX),t.rXU(M.v),t.rXU(t.gRc),t.rXU(a.Ix),t.rXU(P.hE))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-permission"]],decls:21,vars:19,consts:[[1,"flex","main-header"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox22",1,"custom-control-input",3,"ngModelChange","change","ngModel"],["for","checkbox22",1,"custom-control-label","cursor-pointer","chk-check"],[1,"permission-wrap"],["class","user",4,"ngIf"],[1,"user-role",2,"margin-left","10px"],["class","pw-row",4,"ngIf"],[1,"user"],[1,"pw-row"],["class","pw-wrap-row",4,"ngFor","ngForOf"],[1,"action-button-container","flex"],[1,"button-reg","btn-md","tertiary",3,"click"],["type","submit",1,"button-reg","btn-md","primary",3,"click"],[1,"pw-wrap-row"],[1,"form-group","pw-row-full","flex"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"ngModelChange","change","value","ngModel","checked","id"],[1,"custom-control-label","cursor-pointer","chk-check",3,"for"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"h3"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",1)(5,"div",2)(6,"input",3),t.mxI("ngModelChange",function(c){return t.DH7(i.selectAllPermission,c)||(i.selectAllPermission=c),c}),t.bIt("change",function(c){return i.selectAll(c.target.checked)}),t.k0s(),t.j41(7,"label",4),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()(),t.j41(10,"div",5),t.DNE(11,C,6,6,"span",6),t.j41(12,"span",7),t.EFF(13),t.nI1(14,"translate"),t.j41(15,"b"),t.EFF(16),t.nI1(17,"uppercase"),t.k0s()(),t.DNE(18,_,10,9,"div",8),t.nI1(19,"async"),t.nI1(20,"async"),t.k0s()),2&o&&(t.R7$(2),t.JRh(t.bMT(3,7,"Settings.nav.PermissionStatus")),t.R7$(4),t.R50("ngModel",i.selectAllPermission),t.R7$(2),t.SpI(" ",t.bMT(9,9,"Settings.nav.SelectAll")," "),t.R7$(3),t.Y8G("ngIf","user"===i.type),t.R7$(2),t.SpI("",t.bMT(14,11,"common.ROLE")," - "),t.R7$(3),t.JRh(t.bMT(17,13,null==i.detail?null:i.detail.role)),t.R7$(2),t.Y8G("ngIf",t.bMT(19,15,i.sandbox.permissionListLoaded$)&&t.bMT(20,17,i.sandbox.permissionLoaded$)))},dependencies:[l.Sq,l.bT,m.Zm,m.BC,m.vS,l.Jj,l.Pc,g.D9],styles:['.main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:4px!important;height:9px!important;top:5px!important;left:4px!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   span.user[_ngcontent-%COMP%]{color:#222}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 0 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:1rem}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start;gap:32px;margin:0}.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0}.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{padding-left:20px}.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{top:.15rem}.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{top:3px!important}.main[_ngcontent-%COMP%]{display:block;background:#fff;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}.pw-wrap-row[_ngcontent-%COMP%]{width:100%;border-radius:4px;box-shadow:0 2px 4px #00000013;border:solid 1px #eeeded;padding:15px;margin-bottom:16px}.chk-check[_ngcontent-%COMP%]{cursor:pointer}.action-button-container[_ngcontent-%COMP%]{position:sticky;left:0;bottom:0;width:100%;box-shadow:0 -2px 4px #00000012;z-index:9;justify-content:flex-end;align-items:center;height:4.25rem;padding-inline:1.5rem;gap:1rem}']})}}return e})(),canActivate:[d.q],data:{permission:"edit-role-permission"}}]}];let k=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[a.iI.forChild(w),a.iI]})}}return e})();var I=s(31984),F=s(37886);let R=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[l.MD,k,F.UN,I.h,g.h.forChild()]})}}return e})()}}]);