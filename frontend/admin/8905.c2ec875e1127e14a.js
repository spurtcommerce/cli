"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[8905],{18905:(Q,P,s)=>{s.r(P),s.d(P,{AuthenticationModule:()=>B});var h=s(60177),y=s(37886),v=s(51188),r=s(89417),o=s(54438),F=s(98968),O=s(88068),C=s(345),R=s(108),b=s(41780);const M=e=>({validationcolor:e}),$=()=>({standalone:!0}),k=()=>["/auth/forgot-password"];function L(e,p){1&e&&(o.j41(0,"div",15),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"Profile.Login.Error.Usernamerequired")," "))}function j(e,p){1&e&&(o.j41(0,"div",15),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"Profile.Login.Error.Incorrectemail")," "))}function N(e,p){1&e&&(o.j41(0,"div",15),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"Profile.Login.Error.Passwordrequired")," "))}function A(e,p){1&e&&(o.j41(0,"div",15),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"Profile.Login.Error.UsernameorPasswordisincorrect")," "))}function G(e,p){1&e&&o.nrm(0,"span",16)}function U(e,p){1&e&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.JRh(o.bMT(2,1,"Profile.Login.login")))}const D=e=>({validationcolor:e}),Y=()=>["/auth/login"];function J(e,p){1&e&&(o.j41(0,"div",9),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"Profile.Login.Error.Emailrequired")," "))}function z(e,p){1&e&&(o.j41(0,"div",9),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"Profile.Login.Error.Incorrectemail")," "))}const W=[{path:"login",component:(()=>{class e{constructor(a,n,t,l){this.fb=a,this.authSandbox=n,this.layoutSandbox=t,this.title=l,this.emailPattern="[a-zA-Z0-9.-_-._]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",this.ifSubmitted=!1,this.badResponse=!1,this.subscriptions=[],this.emailInvalidShow=!1,this.title.setTitle("Admin Log In")}ngOnInit(){this.loginForm=this.fb.group({userName:["",[r.k0.required,r.k0.pattern(this.emailPattern)]],password:["",r.k0.required]})}validateAllFormFields(a){Object.keys(a.controls).forEach(n=>{const t=a.get(n);t instanceof r.hs?t.markAsTouched({onlySelf:!0}):t instanceof r.J3&&this.validateAllFormFields(t)})}focusouterrorShow(){this.emailInvalidShow=!["",null,void 0].includes(this.loginForm.value.userName)&&!/[a-zA-Z0-9.-_\-\._]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}/.test(this.loginForm.value.userName)}changeUSername(){this.emailInvalidShow=!1}onSubmit(a){if(this.ifSubmitted=!0,!this.loginForm.valid)return void this.validateAllFormFields(this.loginForm);const n={};n.userName=this.loginForm.value.userName,n.password=this.loginForm.value.password,this.authSandbox.authLogin(n),this.subscriptions.push(this.authSandbox.loginLoaded$.subscribe(t=>{if(!0===t){localStorage.setItem("keepMeSignIn",this.keepMeSignIn??!1);const l=JSON.parse(localStorage.getItem("adminUser"))?JSON.parse(localStorage.getItem("adminUser")):JSON.parse(sessionStorage.getItem("adminUser"));this.layoutSandbox.getUserDetail(l)}else this.loginForm.reset()}))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}static{this.\u0275fac=function(n){return new(n||e)(o.rXU(r.ze),o.rXU(F.W),o.rXU(O.K),o.rXU(C.hE))}}static{this.\u0275cmp=o.VBU({type:e,selectors:[["app-spurt-login"]],decls:31,vars:31,consts:[["autocomplete","off",3,"ngSubmit","formGroup"],[1,"form-group","first"],["for",""],["type","text","formControlName","userName",1,"form-control",3,"focusout","input","placeholder","ngClass"],["class","validation-error",4,"ngIf"],[1,"form-group",2,"position","relative"],["type","password","passwordshow","","autocomplete","new-password","formControlName","password",1,"form-control",3,"keydown.space","placeholder","ngClass"],[1,"login-flexx"],[1,"custom-control","custom-checkbox","mr-sm-2"],["type","checkbox","id","checkbox1",1,"custom-control-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","checkbox1",1,"custom-control-label",2,"cursor","pointer"],["href","javascript:void(0)",3,"routerLink"],[1,"form-btn"],["class","spinner-border spinner-border-sm ","style","margin-left:20px;width:23px;height:23px","aria-hidden","true",4,"ngIf"],[4,"ngIf"],[1,"validation-error"],["aria-hidden","true",1,"spinner-border","spinner-border-sm",2,"margin-left","20px","width","23px","height","23px"]],template:function(n,t){1&n&&(o.j41(0,"div")(1,"form",0),o.bIt("ngSubmit",function(){return t.onSubmit(t.loginForm.value)}),o.j41(2,"h1"),o.EFF(3),o.nI1(4,"translate"),o.k0s(),o.j41(5,"div",1)(6,"label",2),o.EFF(7,"Username *"),o.k0s(),o.j41(8,"input",3),o.nI1(9,"translate"),o.bIt("focusout",function(){return t.focusouterrorShow()})("input",function(){return t.changeUSername()}),o.k0s(),o.DNE(10,L,3,3,"div",4)(11,j,3,3,"div",4),o.k0s(),o.j41(12,"div",5)(13,"label",2),o.EFF(14,"Password *"),o.k0s(),o.j41(15,"input",6),o.nI1(16,"translate"),o.bIt("keydown.space",function(u){return u.preventDefault()}),o.k0s(),o.DNE(17,N,3,3,"div",4),o.k0s(),o.DNE(18,A,3,3,"div",4),o.j41(19,"div",7)(20,"div",8)(21,"input",9),o.mxI("ngModelChange",function(u){return o.DH7(t.keepMeSignIn,u)||(t.keepMeSignIn=u),u}),o.k0s(),o.j41(22,"label",10),o.EFF(23," Keep me signed in "),o.k0s()(),o.j41(24,"a",11),o.EFF(25," Forgot your password? "),o.k0s()(),o.j41(26,"button",12),o.DNE(27,G,1,0,"span",13),o.nI1(28,"async"),o.DNE(29,U,3,3,"span",14),o.nI1(30,"async"),o.k0s()()()),2&n&&(o.R7$(),o.Y8G("formGroup",t.loginForm),o.R7$(2),o.JRh(o.bMT(4,15,"Profile.Login.AdminLogin")),o.R7$(5),o.FS9("placeholder",o.bMT(9,17,"placeholder.User Name")),o.Y8G("ngClass",o.eq3(25,M,t.loginForm.get("userName").hasError("required")&&t.loginForm.get("userName").touched&&1==t.ifSubmitted||1==t.badResponse||t.emailInvalidShow)),o.R7$(2),o.Y8G("ngIf",t.loginForm.get("userName").hasError("required")&&t.loginForm.get("userName").touched&&1==t.ifSubmitted),o.R7$(),o.Y8G("ngIf",t.emailInvalidShow),o.R7$(4),o.FS9("placeholder",o.bMT(16,19,"placeholder.Password")),o.Y8G("ngClass",o.eq3(27,M,t.loginForm.get("password").hasError("required")&&t.loginForm.get("password").touched&&1==t.ifSubmitted||1==t.badResponse)),o.R7$(2),o.Y8G("ngIf",t.loginForm.get("password").hasError("required")&&t.loginForm.get("password").touched&&1==t.ifSubmitted),o.R7$(),o.Y8G("ngIf",1==t.badResponse),o.R7$(3),o.R50("ngModel",t.keepMeSignIn),o.Y8G("ngModelOptions",o.lJ4(29,$)),o.R7$(3),o.Y8G("routerLink",o.lJ4(30,k)),o.R7$(3),o.Y8G("ngIf",o.bMT(28,21,t.authSandbox.loginLoading$)),o.R7$(2),o.Y8G("ngIf",!o.bMT(30,23,t.authSandbox.loginLoading$)))},dependencies:[h.YU,h.bT,v.Wk,R.s,r.qT,r.me,r.Zm,r.BC,r.cb,r.j4,r.JD,r.vS,h.Jj,b.D9],styles:[".validationcolor[_ngcontent-%COMP%]{border-color:red}.error[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .fa, .log-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{margin-top:0!important;margin-right:5px}[_nghost-%COMP%]     .password-show-hide{top:2.7rem!important}"]})}}return e})()},{path:"forgot-password",component:(()=>{class e{constructor(a,n,t){this.fb=a,this.authSandbox=n,this.title=t,this.emailPattern="[a-zA-Z0-9.-_-._]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",this.ifSubmitted=!1,this.title.setTitle("Forgot Password")}ngOnInit(){this.forgotPasswordForm=this.fb.group({email:["",[r.k0.required,r.k0.pattern(this.emailPattern)]]})}onSubmits(a,n){if(this.ifSubmitted=!0,!this.forgotPasswordForm.valid)return void this.validateAllFormFields(this.forgotPasswordForm);const t={};t.email=this.forgotPasswordForm.value.email,this.authSandbox.authForget(t),this.authSandbox.forgorPasswordResponse$.subscribe(l=>{(l&&!0===l||!1===l)&&(this.ifSubmitted=!1,this.forgotPasswordForm.reset(),this.forgotPasswordForm.clearValidators())})}validateAllFormFields(a){Object.keys(a.controls).forEach(n=>{const t=a.get(n);t instanceof r.hs?t.markAsTouched({onlySelf:!0}):t instanceof r.J3&&this.validateAllFormFields(t)})}static{this.\u0275fac=function(n){return new(n||e)(o.rXU(r.ze),o.rXU(F.W),o.rXU(C.hE))}}static{this.\u0275cmp=o.VBU({type:e,selectors:[["app-spurt-forgot-password"]],decls:19,vars:23,consts:[[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"placeholder","ngClass"],["class","validation-error",4,"ngIf"],[1,"login-flexx"],[1,"custom-control","custom-checkbox","mr-sm-2"],["href","javascript:void(0)",3,"routerLink"],[1,"form-btn"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","pull-right",3,"hidden"],[1,"validation-error"]],template:function(n,t){1&n&&(o.j41(0,"form",0),o.bIt("ngSubmit",function(u){return t.onSubmits(u,t.forgotPasswordForm.value)}),o.j41(1,"h1"),o.EFF(2),o.nI1(3,"translate"),o.k0s(),o.j41(4,"div",1),o.nrm(5,"input",2),o.nI1(6,"translate"),o.k0s(),o.DNE(7,J,3,3,"div",3)(8,z,3,3,"div",3),o.j41(9,"div",4),o.nrm(10,"div",5),o.j41(11,"a",6),o.EFF(12),o.nI1(13,"translate"),o.k0s()(),o.j41(14,"button",7),o.EFF(15),o.nI1(16,"translate"),o.nrm(17,"span",8),o.nI1(18,"async"),o.k0s()()),2&n&&(o.Y8G("formGroup",t.forgotPasswordForm),o.R7$(2),o.JRh(o.bMT(3,10,"Profile.Login.forgotpassword")),o.R7$(3),o.FS9("placeholder",o.bMT(6,12,"placeholder.Email")),o.Y8G("ngClass",o.eq3(20,D,t.forgotPasswordForm.get("email").hasError("required")&&t.forgotPasswordForm.get("email").touched&&1==t.ifSubmitted)),o.R7$(2),o.Y8G("ngIf",t.forgotPasswordForm.get("email").hasError("required")&&t.forgotPasswordForm.get("email").touched&&1==t.ifSubmitted),o.R7$(),o.Y8G("ngIf",t.forgotPasswordForm.get("email").hasError("pattern")&&t.forgotPasswordForm.get("email").touched&&1==t.ifSubmitted),o.R7$(3),o.Y8G("routerLink",o.lJ4(22,Y)),o.R7$(),o.SpI(" ",o.bMT(13,14,"Profile.Login.BacktoLogin")," "),o.R7$(3),o.SpI(" ",o.bMT(16,16,"Profile.Login.Submit"),""),o.R7$(2),o.Y8G("hidden",!o.bMT(18,18,t.authSandbox.forgotpasswordLoading$)))},dependencies:[h.YU,h.bT,v.Wk,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,h.Jj,b.D9],styles:[".validationcolor[_ngcontent-%COMP%]{border-color:red}.error[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]{font-size:14px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.53px;color:#000!important;height:53px;border-radius:2px;border:solid 1px #d6d6d6;background-color:#fff}.card-align[_ngcontent-%COMP%]{margin-top:15%}.cards[_ngcontent-%COMP%]{box-shadow:0 2px 10px #00000026;background-color:#fff;width:70%;margin:auto;padding:3% 5%}.cards[_ngcontent-%COMP%]   .admin[_ngcontent-%COMP%]{font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#264151;margin-bottom:7%}.cards[_ngcontent-%COMP%]   .btn-log[_ngcontent-%COMP%]{height:53px;background-color:#264151;border-radius:.1875rem;font-size:18px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#fff;width:100%;margin:5% 0% 3%}.cards[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#514c4c;text-decoration:underline;text-align:right;margin:3% 0% 5%}"]})}}return e})()}];let V=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=o.$C({type:e})}static{this.\u0275inj=o.G2t({imports:[v.iI.forChild(W),v.iI]})}}return e})();var E=s(28380),g=s(74054),S=s(7673),f=s(96354),c=s(25558),I=s(88141),m=s(96380),w=s(99437),T=s(48256);let Z=(()=>{class e{constructor(a,n,t,l,u){this.action$=a,this.authService=n,this.sandbox=t,this.router=l,this.toastr=u,this.doLogin$=(0,g.EH)(()=>this.action$.pipe((0,g.gp)(m.Q3.DO_LOGIN),(0,f.T)(d=>d.payload),(0,c.n)(d=>this.authService.login(d).pipe((0,I.M)(i=>{localStorage.setItem("adminUserdetail",JSON.stringify(i)),sessionStorage.setItem("adminUserdetail",JSON.stringify(i))}),(0,c.n)(i=>[new m.AW(i)]),(0,w.W)(i=>(0,S.of)(new m.dP(i))))))),this.doForget$=(0,g.EH)(()=>this.action$.pipe((0,g.gp)(m.Q3.DO_FORGOT_PASSWORD),(0,f.T)(d=>d.payload),(0,c.n)(d=>this.authService.forgetPassword(d).pipe((0,c.n)(i=>[new m.dH(i)]),(0,w.W)(i=>(0,S.of)(new m.cJ(i))))))),this.gettoken$=(0,g.EH)(()=>this.action$.pipe((0,g.gp)(m.Q3.GET_TOKEN),(0,f.T)(d=>d.payload),(0,c.n)(d=>this.authService.gettoken(d).pipe((0,I.M)(i=>{i&&2===i.status&&this.router.navigate(["/token-expired"]),i&&3===i.status&&this.router.navigate(["/invalid-token"])}),(0,f.T)(i=>new m.Xw(i)),(0,w.W)(i=>(0,S.of)(new m.SM(i))))))),this.setpassword$=(0,g.EH)(()=>this.action$.pipe((0,g.gp)(m.Q3.SET_PASSWORD),(0,f.T)(d=>d.payload),(0,c.n)(d=>this.authService.setpassword(d).pipe((0,I.M)(i=>{i&&1===i.status&&this.router.navigate(["/auth/login"])}),(0,f.T)(i=>new m.Ro(i)),(0,w.W)(i=>(0,S.of)(new m.YE(i)))))))}static{this.\u0275fac=function(n){return new(n||e)(o.KVO(g.En),o.KVO(E.u),o.KVO(F.W),o.KVO(v.Ix),o.KVO(T.tw))}}static{this.\u0275prov=o.jDH({token:e,factory:e.\u0275fac})}}return e})();var X=s(46584),K=s(21626),H=s(13488);let B=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=o.$C({type:e})}static{this.\u0275inj=o.G2t({providers:[E.u,F.W],imports:[h.MD,V,y.UN,H.V,r.X1,r.YN,T._B.forRoot({easing:"ease-in",maxOpened:1,autoDismiss:!0}),g.Vm.forFeature([Z]),b.h.forChild({loader:{provide:b.Wr,useFactory:X.M,deps:[K.Qq]}})]})}}return e})()}}]);