"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[3715],{93715:(rs,C,r)=>{r.r(C),r.d(C,{ChangePasswordModule:()=>as});var f=r(60177),M=r(37886),g=r(74054),R=r(7673),F=r(96354),v=r(25558),m=r(6060),T=r(99437);class E{constructor(d){this.user={},this.user=d||""}}var s=r(54438),$=r(94194);let S=(()=>{class t extends $.j{constructor(){super(...arguments),this.URL=this.getBaseUrl()}changePassword(n){return this.http.put(this.URL+"/auth/change-password",n)}static{this.\u0275fac=(()=>{let n;return function(e){return(n||(n=s.xGo(t)))(e||t)}})()}static{this.\u0275prov=s.jDH({token:t,factory:t.\u0275fac})}}return t})(),y=(()=>{class t{constructor(n,a){this.action$=n,this.service=a,this.doChangePassword$=(0,g.EH)(()=>this.action$.pipe((0,g.gp)(m.Q3.DO_CHANGE_PASWORD),(0,F.T)(e=>e.payload),(0,v.n)(e=>this.service.changePassword(e).pipe((0,v.n)(l=>[new m.nz(new E(l))]),(0,T.W)(l=>(0,R.of)(new m.dJ(l)))))))}static{this.\u0275fac=function(a){return new(a||t)(s.KVO(g.En),s.KVO(S))}}static{this.\u0275prov=s.jDH({token:t,factory:t.\u0275fac})}}return t})();class k{constructor(d){this.oldPassword=d.oldpsw||"",this.newPassword=d.newpsw||""}}var c=r(34514),h=r(13560);const p=t=>t.changepassword,W=(0,c.Mz)(p,h.gO),j=(0,c.Mz)(p,h.jb),G=(0,c.Mz)(p,h.NY),N=(0,c.Mz)(p,h.ws),Y=(0,c.Mz)(p,h.OH);var D=r(84745),u=r(51188);let b=(()=>{class t{constructor(n,a){this.appState=n,this.router=a,this.getChangePassword$=this.appState.select(W),this.getChangePasswordResponse$=this.appState.select(j),this.getChangePasswordRequestLoading$=this.appState.select(G),this.getChangePasswordRequestLoade$=this.appState.select(N),this.getChangePasswordRequestFailed$=this.appState.select(Y),this.subscriptions=[],this.subscribe()}changePSW(n){this.appState.dispatch(new m.dN(new k(n)))}subscribe(){this.subscriptions.push(this.getChangePassword$.subscribe(n=>{n&&n.user&&1===n.user.status&&this.router.navigate(["/dashboard"])}))}static{this.\u0275fac=function(a){return new(a||t)(s.KVO(D.il),s.KVO(u.Ix))}}static{this.\u0275prov=s.jDH({token:t,factory:t.\u0275fac})}}return t})();var i=r(89417),w=r(48526),L=r(345),O=r(84051),U=r(108),I=r(41780);const V=()=>["/../../editprofile"],z=()=>["/../../change-password"],P=t=>({"is-invalid":t}),H=()=>["/dashboard"];function J(t,d){1&t&&(s.j41(0,"div"),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI("",s.bMT(2,1,"Profile.Error.OldPasswordisrequired")," "))}function X(t,d){if(1&t&&(s.j41(0,"div",22),s.DNE(1,J,3,3,"div",23),s.k0s()),2&t){const n=s.XpG();s.R7$(),s.Y8G("ngIf",n.f.oldPSW.errors.required)}}function A(t,d){1&t&&(s.j41(0,"div",22),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI(" ",s.bMT(2,1,"Settings.User.Error.Passwordisrequired")," "))}function B(t,d){1&t&&(s.j41(0,"div",22),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI(" ",s.bMT(2,1,"Settings.User.Error.Mustbeatleast8characters")," "))}function K(t,d){1&t&&(s.j41(0,"div",22),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI(" ",s.bMT(2,1,"Settings.User.Error.Musthaveatleast1numberorSymbol")," "))}function x(t,d){1&t&&(s.j41(0,"div",22),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI(" ",s.bMT(2,1,"Settings.User.Error.Mustcontainatleast1inCapitalCase")," "))}function Q(t,d){1&t&&(s.j41(0,"div",22),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI(" ",s.bMT(2,1,"Settings.User.Error.Mustcontainatleast1inSmallCase")," "))}function Z(t,d){1&t&&(s.j41(0,"div"),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI("",s.bMT(2,1,"Profile.Error.ConfirmPassword")," "))}function q(t,d){1&t&&(s.j41(0,"div"),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&t&&(s.R7$(),s.SpI("",s.bMT(2,1,"Customers.Error.ConfirmpasswordIsMismatch")," "))}function _(t,d){if(1&t&&(s.j41(0,"div",22),s.DNE(1,Z,3,3,"div",23)(2,q,3,3,"div",23),s.k0s()),2&t){const n=s.XpG();s.R7$(),s.Y8G("ngIf",n.f.confirmPSW.errors.required),s.R7$(),s.Y8G("ngIf",n.f.confirmPSW.errors.mismatchedPasswords)}}const ss=[{path:"",component:(()=>{class t{constructor(n,a,e){this.fb=n,this.sandbox=a,this.title=e,this.submitted=!1,this.title.setTitle("Change Password")}ngOnInit(){this.initChangePswForm()}initChangePswForm(){this.changePassword=this.fb.group({oldPSW:["",i.k0.required],newPSW:["",i.k0.compose([i.k0.required,w.N.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),w.N.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),w.N.patternValidator(/[a-z]/,{hasSmallCase:!0}),i.k0.minLength(8)])],confirmPSW:["",i.k0.required]},{validator:this.matchingPasswords("newPSW","confirmPSW")})}matchingPasswords(n,a){return e=>{const o=e.controls[a];if(e.controls[n].value!==o.value)return o.setErrors({mismatchedPasswords:!0})}}onSubmit(n){if(this.submitted=!0,this.changePassword.invalid)return;const a={};a.oldpsw=this.changePassword.value.oldPSW,a.newpsw=this.changePassword.value.newPSW,this.sandbox.changePSW(a)}get f(){return this.changePassword.controls}static{this.\u0275fac=function(a){return new(a||t)(s.rXU(i.ze),s.rXU(b),s.rXU(L.hE))}}static{this.\u0275cmp=s.VBU({type:t,selectors:[["app-spurt-changepassword"]],decls:67,vars:62,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container","editprofile-container",2,"padding","16px"],[1,"setup-right"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link","bg-transparent",3,"routerLink"],["href","javascript:void(0)",1,"nav-link","bg-transparent","active",3,"routerLink"],[1,"set-lay-notes","mt-3","flex"],[1,"flex","editprofilerow"],["novalidate","",1,"form-horizontal","epr-frm-pwd",3,"ngSubmit","formGroup"],[1,"epr-frm"],[1,"suprs-form"],[1,"form-group"],["href","javascript:void(0)"],[1,"",2,"position","relative"],["required","","minlength","8","type","password","formControlName","oldPSW","aria-label","Current Password","aria-describedby","basic-addon1","passwordshow","",1,"form-control",3,"ngModelChange","keydown.space","ngModel","ngClass","placeholder"],["class","invalid-feedback",4,"ngIf"],["required","","minlength","5","type","password","formControlName","newPSW","aria-label","New Password","aria-describedby","basic-addon2","passwordshow","",1,"form-control",3,"ngModelChange","keydown.space","ngModel","ngClass","placeholder"],["required","","minlength","5","type","password","formControlName","confirmPSW","aria-label","Confirm Password","aria-describedby","basic-addon2","passwordshow","",1,"form-control",3,"ngModelChange","keydown.space","ngModel","ngClass","placeholder"],[1,"action-button-container","flex"],["routerLinkActive","router-link-active",1,"button-reg","btn-md","tertiary",3,"routerLink"],[1,"button-reg","btn-md","primary"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(a,e){1&a&&(s.j41(0,"div",0),s.nrm(1,"app-breadcrumb"),s.j41(2,"div",1)(3,"div",2)(4,"ul",3)(5,"li",4)(6,"a",5)(7,"span"),s.EFF(8),s.nI1(9,"translate"),s.k0s()()(),s.j41(10,"li",4)(11,"a",6)(12,"span"),s.EFF(13),s.nI1(14,"translate"),s.k0s()()()(),s.j41(15,"div",7)(16,"h4"),s.EFF(17),s.nI1(18,"translate"),s.k0s(),s.j41(19,"p"),s.EFF(20),s.nI1(21,"translate"),s.k0s()(),s.j41(22,"form")(23,"div",8)(24,"form",9),s.bIt("ngSubmit",function(){return e.onSubmit(e.changePassword.value)}),s.j41(25,"div",10)(26,"div",11)(27,"div",12)(28,"label"),s.EFF(29),s.nI1(30,"translate"),s.nrm(31,"a",13),s.k0s(),s.j41(32,"div",14)(33,"input",15),s.nI1(34,"translate"),s.mxI("ngModelChange",function(o){return s.DH7(e.oldPSW,o)||(e.oldPSW=o),o}),s.bIt("keydown.space",function(o){return o.preventDefault()}),s.k0s(),s.DNE(35,X,2,1,"div",16),s.k0s()()(),s.j41(36,"div",11)(37,"div",12)(38,"label"),s.EFF(39),s.nI1(40,"translate"),s.nrm(41,"a",13),s.k0s(),s.j41(42,"div",14)(43,"input",17),s.nI1(44,"translate"),s.mxI("ngModelChange",function(o){return s.DH7(e.newPSW,o)||(e.newPSW=o),o}),s.bIt("keydown.space",function(o){return o.preventDefault()}),s.k0s(),s.DNE(45,A,3,3,"div",16)(46,B,3,3,"div",16)(47,K,3,3,"div",16)(48,x,3,3,"div",16)(49,Q,3,3,"div",16),s.k0s()()(),s.j41(50,"div",11)(51,"div",12)(52,"label"),s.EFF(53),s.nI1(54,"translate"),s.nrm(55,"a",13),s.k0s(),s.j41(56,"div",14)(57,"input",18),s.nI1(58,"translate"),s.mxI("ngModelChange",function(o){return s.DH7(e.confirmPSW,o)||(e.confirmPSW=o),o}),s.bIt("keydown.space",function(o){return o.preventDefault()}),s.k0s(),s.DNE(59,_,3,2,"div",16),s.k0s()()(),s.j41(60,"div",19)(61,"button",20),s.EFF(62),s.nI1(63,"translate"),s.k0s(),s.j41(64,"button",21),s.EFF(65),s.nI1(66,"translate"),s.k0s()()()()()()()()()),2&a&&(s.R7$(6),s.Y8G("routerLink",s.lJ4(53,V)),s.R7$(2),s.SpI(" ",s.bMT(9,29,"Profile.user.Profile")," "),s.R7$(3),s.Y8G("routerLink",s.lJ4(54,z)),s.R7$(2),s.SpI(" ",s.bMT(14,31,"Profile.user.Password")," "),s.R7$(4),s.SpI("",s.bMT(18,33,"common.Note")," :"),s.R7$(3),s.JRh(s.bMT(21,35,"common.Here, the admin can change the password as per the password policies. It is recommended that the admin changes password time to time in order keep their panel secured, without giving any room for guessing by any third party.")),s.R7$(4),s.Y8G("formGroup",e.changePassword),s.R7$(5),s.SpI("",s.bMT(30,37,"Profile.user.CurrentPassword")," "),s.R7$(4),s.FS9("placeholder",s.bMT(34,39,"placeholder.Current Password")),s.R50("ngModel",e.oldPSW),s.Y8G("ngClass",s.eq3(55,P,e.submitted&&e.f.oldPSW.errors)),s.R7$(2),s.Y8G("ngIf",e.submitted&&e.f.oldPSW.errors),s.R7$(4),s.SpI("",s.bMT(40,41,"Profile.user.NewPassword")," "),s.R7$(4),s.FS9("placeholder",s.bMT(44,43,"placeholder.New Password")),s.R50("ngModel",e.newPSW),s.Y8G("ngClass",s.eq3(57,P,e.submitted&&e.f.newPSW.errors)),s.R7$(2),s.Y8G("ngIf",e.submitted&&e.changePassword.controls.newPSW.hasError("required")),s.R7$(),s.Y8G("ngIf",e.changePassword.controls.newPSW.hasError("minlength")),s.R7$(),s.Y8G("ngIf",e.changePassword.controls.newPSW.hasError("hasNumber")),s.R7$(),s.Y8G("ngIf",e.changePassword.controls.newPSW.hasError("hasCapitalCase")),s.R7$(),s.Y8G("ngIf",e.changePassword.controls.newPSW.hasError("hasSmallCase")),s.R7$(4),s.SpI("",s.bMT(54,45,"Profile.user.ConfirmPassword")," "),s.R7$(4),s.FS9("placeholder",s.bMT(58,47,"placeholder.Confirm Password")),s.R50("ngModel",e.confirmPSW),s.Y8G("ngClass",s.eq3(59,P,e.submitted&&e.f.confirmPSW.errors)),s.R7$(2),s.Y8G("ngIf",e.submitted&&e.f.confirmPSW.errors),s.R7$(2),s.Y8G("routerLink",s.lJ4(61,H)),s.R7$(),s.SpI("",s.bMT(63,49,"Settings.Local.Country.Cancel")," "),s.R7$(3),s.SpI(" ",s.bMT(66,51,"Settings.Local.Save")," "))},dependencies:[f.YU,f.bT,u.Wk,u.wQ,i.qT,i.me,i.BC,i.cb,i.YS,i.xh,i.j4,i.JD,i.cV,O.D,U.s,I.D9],styles:[".auth-wrapper[_ngcontent-%COMP%]   .auth-box[_ngcontent-%COMP%]   .changePswform[_ngcontent-%COMP%]   .float-left[_ngcontent-%COMP%]{line-height:2;font-weight:800;background:#1e313e;border-radius:30px;width:130px;margin-left:unset!important}"]})}}return t})(),data:{urls:[{title:"breadcrumbs.Settings",url:""},{title:"breadcrumbs.Change Password",url:""}]}}];let ts=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=s.$C({type:t})}static{this.\u0275inj=s.G2t({imports:[u.iI.forChild(ss),u.iI]})}}return t})();var es=r(31984),ns=r(13488);let as=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=s.$C({type:t})}static{this.\u0275inj=s.G2t({providers:[b,S],imports:[f.MD,M.UN,g.Vm.forFeature([y]),ts,I.h,i.X1,i.YN,es.h,ns.V]})}}return t})()}}]);