"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[9158],{53332:(j,F,i)=>{i.d(F,{x:()=>ct});var n=i(18359),C=i(61322),h=i(89417),t=i(54438),S=i(51188),f=i(37886),k=i(34461),u=i(60177),T=i(41780);const d=["closeBtn"],b=a=>({disable:a});function r(a,l){1&a&&(t.j41(0,"span",20),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"marketplace.Errors.Titleisrequired")," "))}function c(a,l){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",21),t.EFF(6),t.k0s(),t.j41(7,"td",22)(8,"button",23),t.bIt("click",function(){const s=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.removeSettlementItem(s))}),t.nrm(9,"img",24),t.k0s()()()}if(2&a){const e=l.$implicit,o=t.XpG();t.R7$(2),t.SpI("",e.orderProductPrefixId," "),t.R7$(2),t.JRh(e.companyName),t.R7$(2),t.E5c("",e.currencySymbolLeft," ",e.NetAmount," ",e.currencySymbolRight,""),t.R7$(2),t.Y8G("ngClass",t.eq3(6,b,1==o.settlementArray.length))}}let p=(()=>{class a{constructor(e,o,s,m,g){this.fb=e,this.router=o,this.modalService=s,this.sandbox=m,this.modal=g,this.title="",this.submitted=!1,this.subscriptions=[],this.orderId=[],this.isSubmitted=!1,this.settlTitle=h.EL}get f(){return this.SettleForm.controls}ngOnInit(){this.currency=sessionStorage.getItem("adminCurrency")?JSON.parse(sessionStorage.getItem("adminCurrency")):"",this.settlementArray.length>0&&this.calculateSettlement()}_formGroup(){this.SettleForm=this.fb.group({settlTitle:["",h.k0.required]})}calculateSettlement(){let e=0;this.settlementAmount=0,this.settlementArray.forEach(o=>{this.orderId.push(o.vendorOrderId),e+=+o.NetAmount,this.settlementAmount=e}),this.settlementAmount=this.settlementAmount?this.settlementAmount.toFixed(2):0}makeSettlement(){if(this.isSubmitted=!0,""!=this.title){const e={};e.title=this.title,e.vendorOrderId=this.orderId,this.sandbox.makeSettlement(e),this.sandbox.makeSettlement$.subscribe(o=>{o&&1===o.status&&(this.title="",this.modal.close("success"),this.subscribe())})}}removeSettlementItem(e){this.orderId=[],this.settlementArray=this.settlementArray.filter(o=>o.vendorOrderId!==e.vendorOrderId),this.calculateSettlement()}close(){this.modal.close()}subscribe(){this.subscriptions.push(this.sandbox.makeSettlement$.subscribe(e=>{e&&Object.keys(e).length&&1===e.status&&this.modal.close("success")}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.settlementArray=[],this.orderId=[]}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(h.ze),t.rXU(S.Ix),t.rXU(f.Bq),t.rXU(k.N),t.rXU(f.Lw))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-settlement-modal"]],viewQuery:function(o,s){if(1&o&&t.GBs(d,5),2&o){let m;t.mGM(m=t.lsd())&&(s.closeAddExpenseModal=m.first)}},decls:56,vars:33,consts:[[1,"modal-content","right"],[1,"modal-body"],["type","button","data-dismiss","modal","aria-label","Close",1,"close-modal",3,"click"],["src","assets/img/modal-close.svg","alt","cancel"],[1,"modal-header__title"],[1,"form-group"],[1,"supvalidation"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["class","error-msg",4,"ngIf"],[1,"title-align"],[1,"header"],[1,"product-table"],[1,"table-responsive"],[1,"table"],["width","25%",1,"text-left"],["width","35%",1,"text-left"],["width","40%",1,"text-right"],[4,"ngFor","ngForOf"],[1,"modal-action-btns","flex"],[3,"click"],[1,"error-msg"],[1,"text-right","price"],[1,"text-center","action-btn"],[3,"click","ngClass"],["src","assets/img/cancel-btn.png","alt","cancel"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return s.close()}),t.nrm(3,"img",3),t.k0s(),t.j41(4,"h3",4),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"div",5)(8,"label"),t.EFF(9),t.nI1(10,"translate"),t.j41(11,"sup",6),t.EFF(12,"*"),t.k0s()(),t.j41(13,"input",7),t.mxI("ngModelChange",function(g){return t.DH7(s.title,g)||(s.title=g),g}),t.k0s(),t.DNE(14,r,3,3,"span",8),t.k0s(),t.j41(15,"div",9)(16,"h4"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"span"),t.EFF(20,":"),t.k0s(),t.j41(21,"h4")(22,"b"),t.EFF(23),t.k0s()(),t.j41(24,"h4"),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.j41(27,"span"),t.EFF(28,":"),t.k0s(),t.j41(29,"h4")(30,"b"),t.EFF(31),t.k0s()()(),t.j41(32,"h5",10),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.j41(35,"div",11)(36,"div",12)(37,"table",13)(38,"thead")(39,"tr")(40,"th",14),t.EFF(41),t.nI1(42,"translate"),t.k0s(),t.j41(43,"th",15),t.EFF(44),t.nI1(45,"translate"),t.k0s(),t.j41(46,"th",16),t.EFF(47),t.nI1(48,"translate"),t.k0s(),t.nrm(49,"th"),t.k0s()(),t.j41(50,"tbody"),t.DNE(51,c,10,8,"tr",17),t.k0s()()()(),t.j41(52,"div",18)(53,"button",19),t.bIt("click",function(){return s.makeSettlement()}),t.EFF(54),t.nI1(55,"translate"),t.k0s()()()()),2&o&&(t.R7$(5),t.JRh(t.bMT(6,15,"marketplace.settlement.Settlement")),t.R7$(4),t.JRh(t.bMT(10,17,"marketplace.settlement.Title")),t.R7$(4),t.R50("ngModel",s.title),t.R7$(),t.Y8G("ngIf",s.isSubmitted&&""===s.title),t.R7$(3),t.SpI("",t.bMT(18,19,"marketplace.settlement.TotalOrders")," "),t.R7$(6),t.JRh(s.settlementArray.length),t.R7$(2),t.SpI("",t.bMT(26,21,"marketplace.settlement.TotalSettlementValue")," "),t.R7$(6),t.Lme("",s.currency.symbol,"",s.settlementAmount,""),t.R7$(2),t.JRh(t.bMT(34,23,"marketplace.settlement.SettlementDetails")),t.R7$(8),t.JRh(t.bMT(42,25,"marketplace.settlement.OrderLineNo")),t.R7$(3),t.JRh(t.bMT(45,27,"marketplace.payments.CompanyName")),t.R7$(3),t.JRh(t.bMT(48,29,"marketplace.payments.Amount")),t.R7$(4),t.Y8G("ngForOf",s.settlementArray),t.R7$(3),t.JRh(t.bMT(55,31,"marketplace.product.Save")))},dependencies:[u.YU,u.Sq,u.bT,h.me,h.BC,h.vS,T.D9],styles:[".modal-content[_ngcontent-%COMP%]{background:#fff!important}.modal-header__title[_ngcontent-%COMP%]{margin-bottom:1rem}.right[_ngcontent-%COMP%]{position:fixed;right:0;top:0;height:100vh;background:#fff;z-index:999;box-shadow:-5px 2px 8px #00000040}.modal.right[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{position:fixed;margin:auto;width:80%;max-width:60%;height:100%;transform:translateZ(0)}.modal.right[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.modal.right[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:15px 15px 10px}.modal.right.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{top:200px;right:-80%;transition:opacity .3s linear,right .3s ease-out}.modal.right.fade.in[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%], .modal.right.fade.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{right:0}.modal-content[_ngcontent-%COMP%]{border-radius:0;border:none}.modal-open[_ngcontent-%COMP%]   .modal.settlement-modal.fade.in[_ngcontent-%COMP%]{opacity:1}.modal-body[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;background-color:#fff;border:none}.modal-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#222;margin:0 0 10px}.modal-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:25px 0 20px}.error-msg[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;color:red}.form-group[_ngcontent-%COMP%]{margin-bottom:26px;position:relative}.disable[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.title-align[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 10px 1fr;align-items:baseline}"]})}}return a})();const _=[{displayName:"",id:"orderProductPrefixId",type:"checkBox",checked:!0,isEnableSelectall:!0,customStyle:{trow:{width:"35px"},tbody:{width:{width:"35px"}}}},{displayName:"marketplace.settlement.OrderLineNo",id:"orderProductPrefixId",type:"template",checked:!0},{displayName:"marketplace.settlement.CompanyName",id:"companyName",type:"default",checked:!0},{displayName:"marketplace.settlement.OrderDate",id:"createdDate",type:"date",checked:!0},{displayName:"marketplace.settlement.OrderAmount",type:"template",id:"total",checked:!0,customStyle:{trow:{class:"text-right"},tbody:{class:"text-right"}}},{displayName:"marketplace.settlement.CommisionAmount",type:"template",id:"CommissionAmount",checked:!0,customStyle:{trow:{class:"text-right"},tbody:{class:"text-right"}}},{displayName:"marketplace.settlement.NetAmount",type:"template",id:"NetAmount",checked:!0,customStyle:{trow:{class:"text-right"},tbody:{class:"text-right"}}},{displayName:"marketplace.settlement.OrderStatus(at Line Level)",id:"orderStatusName",type:"template",checked:!0,customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}}],O={CompanyName:{label:"marketplace.payments.CompanyName",name:"CompanyName",aliasName:"",validatiors:[],type:"text",placeholder:"placeholder.Company Name"},FromDate:{label:"marketplace.payments.FromDate",name:"FromDate",aliasName:"",validatiors:[],type:"date",placeholder:"dd/mm/yyyy"},ToDate:{label:"marketplace.payments.ToDate",name:"ToDate",aliasName:"",validatiors:[],type:"date",placeholder:"dd/mm/yyyy"},RangeFrom:{label:"marketplace.settlement.RangeFrom",name:"RangeFrom",aliasName:"",type:"number",placeholder:"marketplace.settlement.RangeFrom"},RangeTo:{label:"marketplace.settlement.RangeTo",name:"RangeTo",aliasName:"",type:"number",placeholder:"marketplace.settlement.RangeTo"},OrderStatus:{label:"marketplace.settlement.OrderStatus",name:"OrderStatus",aliasName:"",validatiors:[],type:"ngSelect",placeholder:"marketplace.settlement.OrderStatus",customData:{data:[],key:"",value:""}},Search:{label:"marketplace.common.Search",name:"search",aliasName:"",validatiors:[],type:"text",placeholder:"marketplace.common.Search"}};function v(a){for(const l in a)a.hasOwnProperty(l)&&(null==a[l]||""===a[l])&&delete a[l];return a}var M=i(98852),y=i(45312),L=i(345),$=i(60707),R=i(34501),N=i(88322),G=i(74937),V=i(42612),A=i(18186),U=i(32749);const B=["myDropdown"],Y=(a,l,e,o,s)=>({orderProductPrefixId:a,total:l,NetAmount:e,CommissionAmount:o,orderStatusName:s}),X=a=>({"collapse-div":a}),w=a=>({"disable-btn":a}),z=a=>({background:a});function K(a,l){if(1&a&&(t.qex(0),t.EFF(1),t.nI1(2,"date"),t.bVm()),2&a){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.value,"dd/MM/yyyy")," ")}}function W(a,l){if(1&a&&(t.qex(0),t.EFF(1),t.nI1(2,"date"),t.bVm()),2&a){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.value,"dd/MM/yyyy")," ")}}function J(a,l){if(1&a&&(t.qex(0),t.EFF(1),t.bVm()),2&a){const e=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.SpI(" ",o.getDropdownValue("vendorList","vendorId",e.value,"companyName")," ")}}function Q(a,l){if(1&a&&(t.qex(0),t.EFF(1),t.bVm()),2&a){const e=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.SpI(" ",o.getDropdownValue("orderStatusList","orderStatusId",e.value,"name")," ")}}function H(a,l){if(1&a&&(t.qex(0),t.EFF(1),t.bVm()),2&a){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e.value," ")}}function Z(a,l){if(1&a){const e=t.RV6();t.j41(0,"div",33)(1,"span"),t.EFF(2),t.k0s(),t.qex(3,34),t.DNE(4,K,3,4,"ng-container",35)(5,W,3,4,"ng-container",35)(6,J,2,1,"ng-container",35)(7,Q,2,1,"ng-container",35)(8,H,2,1,"ng-container",36),t.bVm(),t.j41(9,"button",37),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,m=t.XpG();return t.Njj(m.removeFilter(s))}),t.nrm(10,"img",38),t.k0s()()}if(2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.key," : "),t.R7$(),t.Y8G("ngSwitch",e.key),t.R7$(),t.Y8G("ngSwitchCase","FromDate"),t.R7$(),t.Y8G("ngSwitchCase","ToDate"),t.R7$(),t.Y8G("ngSwitchCase","ChooseVendor"),t.R7$(),t.Y8G("ngSwitchCase","ChooseVendor")}}function q(a,l){if(1&a&&(t.j41(0,"div",31),t.DNE(1,Z,11,6,"div",32),t.k0s()),2&a){const e=l.$implicit,o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.empty.includes(e.value))}}function tt(a,l){if(1&a&&t.nrm(0,"app-common-form",41),2&a){const e=t.XpG().$implicit,o=t.XpG();t.Y8G("type",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].type)("control",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].control)("label",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].label)("inputId",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].inputId)("aliasName",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].aliasName)("placeholder",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].placeholder)("customData",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].customData)}}function et(a,l){if(1&a&&(t.j41(0,"div",39),t.DNE(1,tt,1,7,"app-common-form",40),t.k0s()),2&a){const e=l.$implicit,o=l.index;t.Y8G("ngClass",t.eq3(2,X,1==o||2==o||3==o||4==o)),t.R7$(),t.Y8G("ngIf","Search"!==e)}}function nt(a,l){if(1&a){const e=t.RV6();t.j41(0,"div",42)(1,"button",43),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.makeSettlement())}),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(),t.Y8G("appHideIfUnauthorized","make-settlement")("ngClass",t.eq3(6,w,0==e.selectedDatas.length))("disabled",0==e.selectedDatas.length),t.R7$(),t.SpI(" ",t.bMT(3,4,"marketplace.settlement.MakeSettlement")," ")}}function at(a,l){if(1&a&&(t.j41(0,"span",44),t.EFF(1),t.k0s()),2&a){const e=l.$implicit;t.R7$(),t.JRh(null==e?null:e.orderProductPrefixId)}}function ot(a,l){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currencysymbol"),t.k0s()),2&a){const e=l.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.total)," ")}}function st(a,l){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currencysymbol"),t.k0s()),2&a){const e=l.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.NetAmount)," ")}}function it(a,l){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currencysymbol"),t.k0s()),2&a){const e=l.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.CommissionAmount)," ")}}function rt(a,l){if(1&a&&(t.j41(0,"span",45),t.EFF(1),t.k0s()),2&a){const e=l.$implicit;t.Y8G("ngStyle",t.eq3(2,z,null==e?null:e.orderColorCode)),t.R7$(),t.JRh(null==e?null:e.orderStatusName)}}function lt(a,l){1&a&&(t.j41(0,"div",46)(1,"span"),t.nrm(2,"img",47),t.k0s(),t.j41(3,"h5"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()),2&a&&(t.R7$(4),t.JRh(t.bMT(5,1,"marketplace.payments.DataNotFound")))}function mt(a,l){if(1&a){const e=t.RV6();t.j41(0,"div",48)(1,"app-reusable-pagination",49),t.nI1(2,"async"),t.bIt("pageChange",function(s){t.eBV(e);const m=t.XpG();return t.Njj(m.onPageChange(s))}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(),t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",t.bMT(2,4,e.sandbox.orderListCount$))("pageSize",e.limit)}}let ct=(()=>{class a{constructor(e,o,s,m,g,I,E){this.titleService=e,this.router=o,this.route=s,this.sandbox=m,this.fb=g,this.service=I,this.modalService=E,this.customTable=_,this.currentPage=1,this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.offset=0,this.queryData={},this.pagination=!0,this.settlementList=[],this.orderStatusList=[],this.vendorList=[],this.subscriptions=new n.yU,this.trackByIndex=D=>D,this.dynamicObjControls={},this.backupFormValue={},this.formValueExists=!1,this._Object=Object,this.empty=[null,"",void 0],this.selectedDatas=[],this.tableCheckbox={isSelectAll:!1},this.imageUrl=y.c.imageUrl,this.currency=JSON.parse(sessionStorage.getItem("adminCurrency"))}ngOnInit(){this.titleService.setTitle("Settlement Order"),this.getDropDownList()}buttonAction(e){"checkBox"===e.key&&(this.selectedDatas=e.selectedDatas)}reset(e=!1){this.settlementList.forEach(o=>o.checked=e),this.selectedDatas=this.settlementList.filter(o=>o?.checked)}resetCheckbox(){this.reset(),this.tableCheckbox.isSelectAll=!1,this.tableCheckbox={...this.tableCheckbox}}dropDownClose(e){this.hasOwnProperty(e)&&this[e]?.close()}resetAll(){this.onPageChange({limit:this.limit,offset:0}),this.productCount(),this.dropDownClose("myDropdown")}applyFilter(){this.filterValueUpdate(),this.resetAll()}getDropdownValue(e,o,s,m){return this[e]?.find(g=>g?.[o]==s)?.[m]}getDropDownList(){this.subscriptions.add(this.service.orderStatusList({}).subscribe(e=>{1==e?.status&&(this.orderStatusList=e?.data,O.OrderStatus.customData={data:this.orderStatusList,key:"name",value:"orderStatusId"})})),this.subscriptions.add(this.service.vendorList({status:1}).subscribe(e=>{1==e?.status&&(this.vendorList=e?.data?.filter(o=>!this.empty.includes(o?.companyName)),this.buildForm(),this.routeSubscribe())}))}makeSettlement(){if(this.selectedDatas.length>0){const e=this.modalService.open(p,{windowClass:"add-roles",animation:!1,backdrop:"static",centered:!1});e.componentInstance.settlementArray=this.selectedDatas,e.result.then(o=>{"success"===o&&this.resetAll()})}}buildForm(){const e=O,o=(0,M.gQ)(e);this.formObjFormGroup=this.fb.group(o),Object.keys(e).forEach(s=>{this.dynamicObjControls[s]=(0,M.yE)(e[s],this.formObjFormGroup)}),this.filterValueUpdate()}removeFilter(e){this.formObjFormGroup.controls[e.key].reset(),this.filterValueUpdate(),this.resetAll()}filterReset(e){"clearAll"==e?this.formObjFormGroup.reset():this.formObjFormGroup.patchValue({CompanyName:"",FromDate:"",ToDate:"",RangeFrom:"",RangeTo:"",ChooseVendor:"",OrderStatus:""}),this.filterValueUpdate(),this.resetAll()}productList(){this.offset=(this.currentPage-1)*this.limit;let e=v(this.getQueryParam());e.count=0,this.sandbox.getSettlementOrderList(e),this.subscriptions.add(this.sandbox.orderList$.subscribe(o=>{this.settlementList=o})),this.updateQueryParam()}productCount(){this.offset=(this.currentPage-1)*this.limit;const e=v(this.getQueryParam());e.count=1,this.sandbox.getSettlementOrderListCount(e)}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.productList()}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}getQueryParam(){return{limit:this.limit,offset:this.offset,keyword:this.backupFormValue.search??"",startDate:this.backupFormValue.FromDate?C(this.backupFormValue.FromDate).format("YYYY-MM-DD"):"",endDate:this.backupFormValue.ToDate?C(this.backupFormValue.ToDate).format("YYYY-MM-DD"):"",amountFrom:this.backupFormValue.RangeFrom?this.backupFormValue.RangeFrom:"",amountTo:this.backupFormValue.RangeTo?this.backupFormValue.RangeTo:"",vendorIds:this.backupFormValue.ChooseVendor?this.backupFormValue.ChooseVendor:"",orderStatus:this.backupFormValue.OrderStatus?this.backupFormValue.OrderStatus:"",companyName:this.backupFormValue?.CompanyName?this.backupFormValue?.CompanyName:""}}filterValueUpdate(){this.backupFormValue=structuredClone(this.formObjFormGroup?.value),this.formValueExists=Object.values(this.backupFormValue).some(e=>!this.empty.includes(e))}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(o=>{e=o,this.limit=e.limit?Number(e.limit):this.limit,this.offset=e.offset?Number(e.offset):0,this.currentPage=e.offset&&e.limit?Math.floor(e.offset/e.limit)+1:1,this.formObjFormGroup.patchValue({CompanyName:e.companyName??"",FromDate:e.startDate?new Date(e.startDate):"",ToDate:e.endDate?new Date(e.endDate):"",RangeFrom:e.amountFrom??"",RangeTo:e.amountTo??"",ChooseVendor:e.vendorIds?Number(e.vendorIds):"",OrderStatus:e.orderStatus?Number(e.orderStatus):null,search:e.keyword??""}),this.filterValueUpdate()})),this.productList(),this.productCount()}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(L.hE),t.rXU(S.Ix),t.rXU(S.nX),t.rXU(k.N),t.rXU(h.ze),t.rXU($.X),t.rXU(f.Bq))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-settlement-order-list"]],viewQuery:function(o,s){if(1&o&&t.GBs(B,5),2&o){let m;t.mGM(m=t.lsd())&&(s.myDropdown=m.first)}},decls:55,vars:55,consts:[["myDropdown","ngbDropdown"],["itemTemplateRef",""],["itemTemplateTotal",""],["itemTemplateNetAmount",""],["itemTemplateCommissionAmount",""],["itemTemplateRefcolor",""],[1,"flex","filter-row"],[1,"filter-lft"],[1,"filter-rht","flex"],["class","added-filter flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-search"],[1,"",3,"keyup.enter"],[3,"type","control","label","inputId","aliasName","placeholder"],["ngbDropdown","",1,"dropdown","filter-dropdown",3,"autoClose"],["ngbDropdownToggle","",1,"button-reg","tertiary","btn-sm"],["src","assets/img/filter.svg","alt",""],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"filter-form"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-btn","flex"],[1,"button-reg","btn-sm","primary",3,"click"],[1,"button-reg","btn-sm","tertiary",3,"click"],["class","filter-btns",4,"ngIf"],[1,"flex","product-wrap","example-full-width"],[1,"product-table"],[1,"spinner-wrapper"],[2,"transform","translate(38%, 50%)","position","absolute",3,"isShow"],[1,"table-responsive"],[3,"buttonChangeEvent","customTemplate","HeadArray","GridArray","selectAll"],["class","nodata-found",4,"ngIf"],["class","pagination flex",4,"ngIf"],[1,"added-filter","flex"],["class","added-filter-col flex filter-detail",4,"ngIf"],[1,"added-filter-col","flex","filter-detail"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"click"],["src","assets/img/close.svg","alt",""],[3,"ngClass"],[3,"type","control","label","inputId","aliasName","placeholder","customData",4,"ngIf"],[3,"type","control","label","inputId","aliasName","placeholder","customData"],[1,"filter-btns"],["type","submit",1,"button-reg","primary","btn-sm",3,"click","appHideIfUnauthorized","ngClass","disabled"],[1,"id"],["href","javascript:void(0)",1,"status-badge",3,"ngStyle"],[1,"nodata-found"],["src","assets/imgs/nodatafound.svg","alt",""],[1,"pagination","flex"],[3,"pageChange","type","currentPage","totalItems","pageSize"]],template:function(o,s){if(1&o){const m=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"h2"),t.EFF(3),t.nI1(4,"translate"),t.nI1(5,"async"),t.k0s()(),t.j41(6,"div",8),t.DNE(7,q,2,1,"div",9),t.nI1(8,"keyvalue"),t.j41(9,"div",10)(10,"form",11),t.bIt("keyup.enter",function(){return t.eBV(m),t.Njj(s.applyFilter())}),t.nrm(11,"app-common-form",12),t.k0s()(),t.j41(12,"div",13,0)(14,"button",14),t.nrm(15,"img",15),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.j41(18,"div",16)(19,"h4"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"form",17),t.DNE(23,et,2,4,"div",18),t.j41(24,"div",19)(25,"button",20),t.bIt("click",function(){return t.eBV(m),t.Njj(s.applyFilter())}),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"button",21),t.bIt("click",function(){return t.eBV(m),t.Njj(s.filterReset(""))}),t.EFF(29),t.nI1(30,"translate"),t.k0s()()()()(),t.DNE(31,nt,4,8,"div",22),t.nI1(32,"async"),t.k0s()(),t.j41(33,"div",23)(34,"div",24)(35,"div",25),t.nrm(36,"app-global-loader",26),t.nI1(37,"async"),t.k0s(),t.j41(38,"div",27)(39,"app-common-table",28),t.bIt("buttonChangeEvent",function(I){return t.eBV(m),t.Njj(s.buttonAction(I))}),t.k0s(),t.DNE(40,at,2,1,"ng-template",null,1,t.C5r)(42,ot,3,3,"ng-template",null,2,t.C5r)(44,st,3,3,"ng-template",null,3,t.C5r)(46,it,3,3,"ng-template",null,4,t.C5r)(48,rt,2,4,"ng-template",null,5,t.C5r)(50,lt,6,3,"div",29),t.nI1(51,"async"),t.DNE(52,mt,3,6,"div",30),t.nI1(53,"async"),t.nI1(54,"async"),t.k0s()()()}if(2&o){let m;const g=t.sdS(41),I=t.sdS(43),E=t.sdS(45),D=t.sdS(47),dt=t.sdS(49);t.R7$(3),t.Lme(" ",t.bMT(4,25,"marketplace.common.totalPaymentCount"),"(",t.bMT(5,27,s.sandbox.orderListCount$),")"),t.R7$(4),t.Y8G("ngForOf",t.bMT(8,29,s.backupFormValue))("ngForTrackBy",s.trackByIndex),t.R7$(4),t.Y8G("type",null==s.dynamicObjControls||null==s.dynamicObjControls.Search?null:s.dynamicObjControls.Search.type)("control",null==s.dynamicObjControls||null==s.dynamicObjControls.Search?null:s.dynamicObjControls.Search.control)("label",null==s.dynamicObjControls||null==s.dynamicObjControls.Search?null:s.dynamicObjControls.Search.label)("inputId",null==s.dynamicObjControls||null==s.dynamicObjControls.Search?null:s.dynamicObjControls.Search.inputId)("aliasName",null==s.dynamicObjControls||null==s.dynamicObjControls.Search?null:s.dynamicObjControls.Search.aliasName)("placeholder",null==s.dynamicObjControls||null==s.dynamicObjControls.Search?null:s.dynamicObjControls.Search.placeholder),t.R7$(),t.Y8G("autoClose",!1),t.R7$(4),t.SpI(" ",t.bMT(17,31,"marketplace.common.Filters")," "),t.R7$(4),t.SpI(" ",t.bMT(21,33,"marketplace.common.QuickFilter")," "),t.R7$(3),t.Y8G("ngForOf",s._Object.keys(s.dynamicObjControls))("ngForTrackBy",s.trackByIndex),t.R7$(3),t.SpI(" ",t.bMT(27,35,"marketplace.common.ApplyFilter")," "),t.R7$(3),t.SpI(" ",t.bMT(30,37,"marketplace.common.Reset")," "),t.R7$(2),t.Y8G("ngIf",(null==(m=t.bMT(32,39,s.sandbox.orderList$))?null:m.length)>0),t.R7$(5),t.Y8G("isShow",t.bMT(37,41,s.sandbox.orderListLoading$)),t.R7$(3),t.Y8G("customTemplate",t.s1E(49,Y,g,I,E,D,dt))("HeadArray",s.customTable)("GridArray",s.settlementList)("selectAll",s.tableCheckbox),t.R7$(11),t.Y8G("ngIf",t.bMT(51,43,s.sandbox.orderListLoaded$)&&0==s.settlementList.length),t.R7$(2),t.Y8G("ngIf",t.bMT(53,45,s.sandbox.orderListLoaded$)&&t.bMT(54,47,s.sandbox.orderListCount$)>s.limit)}},dependencies:[u.YU,u.Sq,u.bT,u.B3,u.ux,u.e1,u.fG,f.tg,f.do,f.U0,h.qT,h.cb,h.cV,R.$,N.H,G.q,V.V,A.V,u.Jj,u.vh,u.lG,U.G,T.D9],styles:[".disable-btn[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.collapse-div[_ngcontent-%COMP%]{display:inline-block;width:43%;margin-inline:10px}"]})}}return a})()},69158:(j,F,i)=>{i.r(F),i.d(F,{SettlementModule:()=>M});var n=i(60177),C=i(51188),h=i(37886),t=i(31984),S=i(59855),f=i(41780),k=i(46584),u=i(21626),T=i(74054),d=i(76386),b=i(63298),r=i(16909),c=i(79176),p=i(34461),_=i(53332),P=i(91785),O=i(9948),v=i(54438);const x=[{path:"",redirectTo:"settlement-order",pathMatch:"full"},{path:"settlement-order",loadChildren:()=>i.e(3051).then(i.bind(i,53051)).then(y=>y.SettlementOrderListModule),canActivate:[c.q],data:{permission:"settlement-product"}},{path:"settlement-history",loadChildren:()=>i.e(4574).then(i.bind(i,44574)).then(y=>y.SettlementHistoryModule),canActivate:[c.q],data:{permission:"settlement-product-history"}},{path:"",redirectTo:"settlement-order",pathMatch:"full"},{path:"settlement-order",component:_.x,data:{urls:[{title:"breadcrumbs.Marketplace",url:""},{title:"Manage Settlements",url:""},{title:"breadcrumbs.Settlement Orders",url:""}]}}];let M=(()=>{class y{static{this.\u0275fac=function(R){return new(R||y)}}static{this.\u0275mod=v.$C({type:y})}static{this.\u0275inj=v.G2t({providers:[p.N,d.A,b.W],imports:[C.iI.forChild(x),n.MD,t.h,S.K,h.UN,P.G,O.C,t.h,f.h.forChild({loader:{provide:f.Wr,useFactory:k.M,deps:[u.Qq]}}),T.Vm.forFeature([r.x])]})}}return y})()},34501:(j,F,i)=>{i.d(F,{$:()=>T});var n=i(54438),C=i(60177),h=i(41780);const t=(d,b)=>({active:d,inactive:b});function S(d,b){if(1&d){const r=n.RV6();n.qex(0,3),n.j41(1,"button",10),n.bIt("click",function(){const p=n.eBV(r).$implicit,_=n.XpG(2);return n.Njj(_.goToPage(p))}),n.EFF(2),n.k0s(),n.bVm()}if(2&d){const r=b.$implicit,c=n.XpG(2);n.R7$(),n.Y8G("ngClass",n.l_i(2,t,c.currentPage===r,c.currentPage!==r)),n.R7$(),n.SpI(" ",r," ")}}function f(d,b){if(1&d){const r=n.RV6();n.j41(0,"div",3)(1,"button",4),n.bIt("click",function(){n.eBV(r);const p=n.XpG();return n.Njj(p.goToPreviousPage())}),n.nrm(2,"img",5),n.k0s(),n.DNE(3,S,3,5,"ng-container",6),n.j41(4,"button",4),n.bIt("click",function(){n.eBV(r);const p=n.XpG();return n.Njj(p.goToNextPage())}),n.nrm(5,"img",7),n.k0s(),n.j41(6,"p"),n.EFF(7),n.nI1(8,"translate"),n.k0s(),n.j41(9,"input",8),n.bIt("input",function(p){n.eBV(r);const _=n.XpG();return n.Njj(_.Gotogivenpage(p.target.value))}),n.k0s(),n.j41(10,"div",9),n.EFF(11),n.k0s()()}if(2&d){const r=n.XpG();n.R7$(),n.Y8G("disabled",1===r.currentPage),n.R7$(2),n.Y8G("ngForOf",r.pages),n.R7$(),n.Y8G("disabled",r.currentPage===r.totalPages),n.R7$(3),n.JRh(n.bMT(8,6,"marketplace.common.Page")),n.R7$(2),n.Y8G("value",r.currentPage),n.R7$(2),n.SpI("of ",r.totalPages,"")}}function k(d,b){if(1&d){const r=n.RV6();n.qex(0),n.j41(1,"button",12),n.bIt("click",function(){const p=n.eBV(r).$implicit,_=n.XpG(2);return n.Njj(_.goToPage(p))}),n.EFF(2),n.k0s(),n.bVm()}if(2&d){const r=b.$implicit,c=n.XpG(2);n.R7$(),n.Y8G("disabled",c.currentPage===r),n.R7$(),n.SpI(" ",r," ")}}function u(d,b){if(1&d&&(n.j41(0,"div"),n.DNE(1,k,3,2,"ng-container",11),n.k0s()),2&d){const r=n.XpG();n.R7$(),n.Y8G("ngForOf",r.totalPageItems)}}let T=(()=>{class d{constructor(){this.type="default",this.pageChange=new n.bkB,this.pageSizeOptions=[5,10,25,50]}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get totalPageItems(){const r=Math.ceil(this.totalItems/this.pageSize);return[...Array(r).keys()].map(c=>c+1)}get currentPageStart(){return(this.currentPage-1)*this.pageSize+1}get currentPageEnd(){const r=this.currentPage*this.pageSize;return r>this.totalItems?this.totalItems:r}get pages(){const r=this.totalPages,p=[];let P=Math.max(1,this.currentPage-Math.floor(2.5)),O=Math.min(r,P+5-1);O-P+1<5&&(P=Math.max(1,O-5+1));for(let v=P;v<=O;v++)p.push(v);return p}pageChanged(r){this.pageChange.emit({offset:(r.pageIndex+1-1)*this.pageSize,limit:this.pageSize})}goToPage(r){r!==this.currentPage&&this.pageChange.emit({offset:(r-1)*this.pageSize,limit:this.pageSize})}goToFirstPage(){1!==this.currentPage&&this.goToPage(1)}Gotogivenpage(r){!["null","",void 0,0,String(this.currentPage)].includes(r)&&this.totalPages>=r&&this.goToPage(r)}goToLastPage(){this.currentPage!==this.totalPages&&this.goToPage(this.totalPages)}goToPreviousPage(){this.currentPage>1&&this.goToPage(this.currentPage-1)}goToNextPage(){this.currentPage<this.totalPages&&this.goToPage(this.currentPage+1)}onPageSizeChange(r){this.pageSize=r.target.value,this.pageChange.emit({offset:0,limit:this.pageSize})}static{this.\u0275fac=function(c){return new(c||d)}}static{this.\u0275cmp=n.VBU({type:d,selectors:[["app-reusable-pagination"]],inputs:{type:"type",currentPage:"currentPage",pageSize:"pageSize",totalItems:"totalItems"},outputs:{pageChange:"pageChange"},decls:3,vars:3,consts:[[1,"pagination","flex",3,"ngSwitch"],["class","page-count flex",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"page-count","flex"],[1,"icon-button",3,"click","disabled"],["src","assets/img/arrow-left.svg","alt",""],["class","page-count flex",4,"ngFor","ngForOf"],["src","assets/img/arrow-right.svg","alt",""],["readonly","true",3,"input","value"],[1,"page-info"],[3,"click","ngClass"],[4,"ngFor","ngForOf"],[1,"number-button",3,"click","disabled"]],template:function(c,p){1&c&&(n.j41(0,"div",0),n.DNE(1,f,12,8,"div",1)(2,u,2,1,"div",2),n.k0s()),2&c&&(n.Y8G("ngSwitch",p.type),n.R7$(),n.Y8G("ngSwitchCase","numbers"),n.R7$(),n.Y8G("ngSwitchCase","fullnumbers"))},dependencies:[C.YU,C.Sq,C.ux,C.e1,h.D9],styles:[".pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:16px;margin:0 5px}.page-size-selector[_ngcontent-%COMP%]{margin-left:10px}.number-button[_ngcontent-%COMP%]{padding:5px;border:1px solid grey;margin:2px}"]})}}return d})()}}]);